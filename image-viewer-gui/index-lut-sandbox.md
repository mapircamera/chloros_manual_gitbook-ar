# صندوق الحماية للمؤشر/LUT

صندوق الحماية للمؤشر/LUT هو مساحة عمل تفاعلية داخل عارض الصور Chloros تتيح لك تجربة حسابات المؤشر متعدد الأطياف وتصور الألوان في الوقت الفعلي. تساعدك هذه الأداة القوية على اختبار مؤشرات مختلفة، وتحسين نطاقات القيم، وإنشاء تصورات جاهزة للنشر دون إعادة معالجة مجموعة البيانات بالكامل.

## ما هو صندوق الرمل للمؤشر/LUT؟

### الغرض

يوفر صندوق الرمل ما يلي:

* **حساب المؤشر في الوقت الفعلي** - تطبيق أي مؤشر نباتي على الفور
* **تعديل LUT التفاعلي** - ضبط تدرجات الألوان ونطاقاتها بدقة
* **تحسين سير العمل** - تحديد أفضل الإعدادات قبل المعالجة المجمعة

### Sandbox مقابل معالجة المشروع

**Index/LUT Sandbox (تفاعلي):**

* صورة واحدة في كل مرة
* ردود فعل فورية
* تجريبي وتكراري
* لا توجد تغييرات دائمة على الملفات
* مثالي للاستكشاف والاختبار

**معالجة المشروع (دفعة):**

* مجموعة البيانات بأكملها في وقت واحد
* إعدادات مسبقة التكوين
* ملفات إخراج دائمة
* تستغرق وقتًا طويلاً
* الأفضل عند الانتهاء من الإعدادات

{% hint style=&quot;success&quot; %}
**أفضل سير عمل**: استخدم Sandbox للتجربة والعثور على الإعدادات المثلى للمؤشر و LUT، ثم قم بتطبيق هذه الإعدادات أثناء معالجة المشروع لمجموعة البيانات بأكملها.
{% endhint %}

***

## العمل مع Sandbox للمؤشر/LUT

### فهم الفهارس المحسوبة مسبقًا

في Chloros، يمكن تطبيق الفهارس أثناء معالجة المشروع. لتحديد إعدادات الفهرس و LUT التي تريد تطبيقها على الصادرات، من الأسهل استخدام صندوق الحماية لعارض الصور.

يتيح لك صندوق الحماية ما يلي:

* **تطبيق مؤشرات وتدرجات ألوان جديدة (LUT)** لتصور البيانات
* **ضبط إعدادات التصور** بشكل تفاعلي
* **عرض** صور المؤشرات المحسوبة مسبقًا
* **فحص** قيم البكسل في جميع مستويات التكبير

### فتح صندوق الحماية

يمكن الوصول إلى صندوق الحماية للمؤشر/LUT من خلال علامة التبويب **مشاهد الصور** <img src="../.gitbook/assets/icon_image-viewer.JPG" alt="" data-size="line"> :

1. انقر فوق صورة في شبكة الصور في مستعرض الملفات، وستفتح في علامة تبويب **عارض الصور** <img src="../.gitbook/assets/icon_image-viewer.JPG" alt="" data-size="line"> .
2. انقر فوق علامة التبويب **عارض الصور** <img src="../.gitbook/assets/icon_image-viewer.JPG" alt="" data-size="line"> لفتح الشريط الجانبي المنبثق الأيسر إذا لم يكن مفتوحًا بالفعل

### تحديد صورة لتطبيق فهرس/LUT عليها

للعمل مع فهرس في شريط <img src="../.gitbook/assets/icon_image-viewer.JPG" alt="" data-size="line"> :

1. **افتح صورة** من شبكة الصور الرئيسية بالنقر عليها
2. ستفتح علامة التبويب **عارض الصور** <img src="../.gitbook/assets/icon_image-viewer.JPG" alt="" data-size="line"> **
3. انقر فوق **القائمة المنسدلة للطبقة** (أعلى يمين العارض)
4. حدد الطبقة من القائمة المنسدلة:
   * RAW (الانعكاس)

### تطبيق فهرس على صورة

بمجرد أن تصبح الصورة في وضع ملء الشاشة ويتم فتح الشريط الجانبي **عارض الصور** <img src="../.gitbook/assets/icon_image-viewer.JPG" alt="" data-size="line"> :

1. حدد مربع المؤشر في الجزء العلوي من الشريط الجانبي
2. اختر مرشح الكاميرا من القائمة المنسدلة اليسرى
3. اختر صيغة المؤشر المطلوبة من القائمة المنسدلة اليمنى
4. اسحب دوائر ألوان قناة المرشح إلى المواقع في صيغة المؤشر أدناه
5. بمجرد أن تصبح الصيغة صالحة، سيتم تحديث الصورة وعرض قيم المؤشر
6. حرك مؤشر الماوس لرؤية القيم في موقع المؤشر
7. قم بالتكبير لرؤية وحدات البكسل الفردية والقيم المرتبطة بها

لكل مؤشر نطاق قيم ومعنى محددان:

#### NDVI مثال

```
Formula: (NIR - Red) / (NIR + Red)

For Survey3W RGN camera:
NIR = 850nm band
Red = 661nm band

Result range: -1.0 to +1.0
Typical vegetation: 0.4 to 0.9
Stressed vegetation: 0.2 to 0.4
Bare soil: 0.0 to 0.2
Water: -0.1 to 0.1
```

للحصول على وثائق كاملة عن صيغة المؤشر، راجع [صيغ المؤشر متعدد الأطياف](../project-settings/multispectral-index-formulas.md).

***

## العمل مع LUTs (جداول البحث)

### ما هو LUT؟

**جدول البحث (LUT)** يربط قيم المؤشر الرقمية بالألوان من أجل التصور:

* **الإدخال**: قيمة بكسل المؤشر (على سبيل المثال، NDVI 0.65)
* **الإخراج**: لون RGB (على سبيل المثال، أخضر فاتح)
* **الغرض**: تسهيل رؤية الأنماط وتفسيرها

**جدول البحث باللون الرمادي مقابل جدول البحث بالألوان:**

* اللون الرمادي: علمي ومحايد، يعرض البيانات الأولية
* جدول البحث بالألوان: بديهي ومؤثر، يبرز الأنماط والاختلافات

{% hint style=&quot;success&quot; %}
**قوة التصور**: يؤدي تطبيق LUT ملون على صورة مؤشر تدرج رمادي إلى تسهيل التعرف على الأنماط والانحرافات والمناطق المهمة بنظرة واحدة.
{% endhint %}

### تطبيق LUT على صورة مؤشر

بمجرد الحصول على صورة مؤشر تظهر

1. انقر فوق <img src="../.gitbook/assets/image.png" alt="" data-size="line"> زر &quot;+Add LUT&quot;
2. حدد التدرج اللوني
3. اضبط نقاط نهاية القص الصغرى/الكبرى
4. اضبط وضع القص
5. حدد مربع الفهرس في **عارض الصور** <img src="../.gitbook/assets/icon_image-viewer.JPG" alt="" data-size="line"> لجانب الشريط الجانبي لتطبيق LUT

### اختيار تدرج لوني

**تحديد تدرج:**

1. في لوحة LUT، حدد **شريط التدرج الملون**
2. حرك الماوس فوقه لعرض الإعدادات المسبقة المتاحة للتدرج
3. حدد التدرج المطلوب
4. **تتحديث الصورة على الفور** بألوان جديدة عند تحديد مربع الفهرس

{% hint style=&quot;success&quot; %}
**أفضل الممارسات**: بالنسبة لمؤشرات الغطاء النباتي مثل NDVI، يعد التدرج Red-Yellow-Green هو الأكثر بديهية لأنه يتوافق مع الارتباطات اللونية الطبيعية (الأخضر = صحي، الأصفر = معتدل، الأحمر = متوتر).
{% endhint %}

### ضبط فئات الألوان

يحدد **عنصر التحكم في الفئات** عدد خطوات الألوان المنفصلة التي تظهر في التدرج اللوني:

**خيارات عدد الفئات:**

* **2-5 فئات**: فئات واسعة جدًا، مناطق متميزة
* **6-10 فئات**: متوازنة، جيدة للتصنيف
* **11-20 فئة**: تدرجات سلسة، مظهر متواصل
* **20+ فئة**: شبه متواصل، أقصى درجة من السلاسة

**كيفية الضبط:**

1. في لوحة LUT، حدد **مربعات عينات الألوان أسفل شريط التدرج**
2. اضبط عدد الفئات عن طريق الإضافة باستخدام الزر +
3. أزل عدد الفئات عن طريق النقر المزدوج على عينة لون
4. يتم تحديث التدرج **في الوقت الفعلي** على الصورة

**التأثير على التصور:**

* **فئات أقل** (3-5): تنشئ مناطق متميزة، وتصنيف مبسط، وفئات يسهل تمييزها
* **فئات متوسطة** (6-10): نهج متوازن، جيد لمعظم التطبيقات
* **فئات أكثر** (15-20): انتقالات سلسة، تباين مفصل، مظهر فوتوغرافي

**متى تستخدم:**

* **فئات قليلة (3-5)**: شرائح العرض التقديمي، خرائط التصنيف، التقارير البسيطة
* **فئات متوسطة (6-10)**: التحليل العام، التفاصيل المتوازنة، التقارير القياسية
* **فئات كثيرة (15-20)**: التحليل العلمي، الفحص التفصيلي، المخرجات ذات الجودة العالية للنشر

### ضبط نطاقات القيم

تحدد **عناصر التحكم في نطاق القيمة** أي قيم مؤشر يتم تعيينها لأي ألوان في التدرج اللوني:

**عناصر التحكم في النطاق في لوحة LUT:**

* **القيمة الدنيا**: الحد الأدنى لمقياس الألوان
* **القيمة القصوى**: الحد الأعلى لمقياس الألوان
* **القيم المتوسطة**: يتم توزيعها تلقائيًا بين الحد الأدنى والحد الأقصى (بناءً على عدد الفئات)

#### ضبط القيم الدنيا/القصوى

**لضبط نطاقات القيم:**

1. في لوحة LUT، حدد حقول الإدخال **القيمة الدنيا** و**القيمة القصوى**
2. انقر فوق حقل **القيمة الدنيا**
3. اكتب القيمة الدنيا المطلوبة (على سبيل المثال، `0.2`)
4. اضغط على **Enter** أو انقر خارج الحقل
5. كرر العملية لحقل **القيمة القصوى** (على سبيل المثال، `0.9`)
6. **يتم تحديث** التصور على الفور

{% hint style=&quot;info&quot; %}
**التحجيم التلقائي**: عند تطبيق LUT لأول مرة، يقوم Chloros تلقائيًا بتعيين الحد الأدنى/الحد الأقصى لنطاق البيانات الفعلي في الصورة. يمكنك بعد ذلك تضييق هذا النطاق للتركيز على نطاقات قيم محددة تهمك.
{% endhint %}

**مثال على تعديلات نطاق NDVI:**

* **النطاق الكامل**: `-1.0` إلى `1.0` (عرض جميع القيم الممكنة)
* **التركيز على الغطاء النباتي**: `0.2` إلى `0.9` (استبعاد التربة الجرداء والمياه)
* **النباتات الصحية فقط**: `0.5` إلى `0.9` (تسليط الضوء على النباتات القوية فقط)
* **كشف الإجهاد**: `0.2` إلى `0.5` (التركيز على المناطق التي بها مشاكل)
* **نطاق مخصص**: اضبطه بناءً على قيم البكسل التي لاحظتها

**لماذا يتم ضبط النطاقات؟**

* **زيادة التباين** في المنطقة التي تهمك
* **استبعاد القيم غير ذات الصلة** (مثل المسطحات المائية والتربة الجرداء)
* **توحيد التصور** عبر صور أو تواريخ متعددة
* **التركيز على الاختلافات الدقيقة** ضمن نطاق قيم ضيق

### قص القيم خارج النطاق

عندما تقع قيم البكسل خارج النطاق الأدنى/الأقصى المحدد، يمكنك التحكم في كيفية عرضها باستخدام **أوضاع القص**.

#### **خيارات أوضاع القص المتاحة:**

#### 1. الحد الأدنى والحد الأقصى

* البكسل **أقل من الحد الأدنى** → العرض باستخدام **اللون الأول** في التدرج (على سبيل المثال، الأحمر)
* البكسلات **فوق الحد الأقصى** → عرض باستخدام **اللون الأخير** في التدرج (على سبيل المثال، الأخضر)
* **حالة الاستخدام**: إبراز القيم المتطرفة، وعرض نطاق البيانات الكامل بألوان مشبعة عند الحدود
* **مثال**: تظهر جميع قيم NDVI الأقل من 0.2 باللون الأحمر، وتظهر جميع القيم الأعلى من 0.9 باللون الأخضر

#### 2. خلفية شفافة

* تصبح البكسلات **خارج النطاق** **شفافة تمامًا**
* تظهر التدرجات اللونية فقط للبكسلات **داخل النطاق**
* **حالة الاستخدام**: تراكب GIS، عزل نطاقات قيم محددة، إبراز المناطق ذات الأهمية فقط
* **مثال**: عرض NDVI 0.4-0.7 بالألوان فقط، وجميع القيم الأخرى شفافة

{% hint style=&quot;warning&quot; %}
**قيود الشفافية**: ستظهر البكسلات الشفافة بلون الخلفية في العارض. عند التصدير أثناء المعالجة، يتم الحفاظ على الشفافية في تنسيق PNG ولكن ليس في تنسيق JPG.
{% endhint %}

#### 3. خلفية المؤشر

* تظهر البكسلات **خارج النطاق** باللون **الرمادي** (تظهر قيم المؤشر الأولية)
* تظهر البكسلات **داخل النطاق** **تدرجًا لونيًا**
* **حالة الاستخدام**: تمييز خفيف، الحفاظ على السياق مع التركيز على المناطق المهمة
* **مثال**: تمييز النباتات المجهدة بالألوان (NDVI 0.3-0.5) مع عرض المناطق السليمة باللون الرمادي

#### 4. الخلفية الأصلية

* يتم عرض البكسلات **خارج النطاق** **بالصورة متعددة الأطياف الأصلية**
* البكسلات **داخل النطاق** تظهر **تدرج اللون**
* **حالة الاستخدام**: الأكثر بديهية - تجمع بين سياق الصورة الطبيعي وتراكب الألوان التحليلي
* **مثال**: شاهد المظهر الفعلي للحقل/المحصول مع تراكب المناطق المتوترة المرمزة بالألوان

### اختيار وضع القص المناسب

| وضع القص              | الأفضل لـ                                   | نمط التصور          |
| -------------------------- | ------------------------------------------ | ---------------------------- |
| **الحد الأدنى والحد الأقصى**    | عرض البيانات الكامل، التحليل العلمي     | جميع البكسلات ملونة           |
| **خلفية شفافة** | تراكبات GIS، عزل نطاقات محددة    | لون على النطاق، فارغ خارج النطاق |
| **خلفية الفهرس**       | تأكيد خفيف، الحفاظ على سياق البيانات  | لون على النطاق، رمادي خارج النطاق  |
| **الخلفية الأصلية**    | التقارير، العروض التقديمية، التحليل البديهي | لون على النطاق، صورة خارج النطاق |

### إنشاء ألوان LUT مخصصة

للتحكم الكامل في التصور، يمكنك إنشاء **تدرجات ألوان مخصصة** عن طريق تحرير نقاط توقف الألوان الفردية.

**لإنشاء تدرج مخصص:**

1. في لوحة LUT، حدد موقع **شريط معاينة التدرج**
2. ابحث عن **مربعات عينات الألوان** أسفل التدرج
3. **انقر فوق نقطة توقف لون** لتحديدها
4. يفتح **محدد الألوان**
5. اختر لونًا جديدًا باستخدام:
   * **عجلة الألوان**: اختيار اللون بصريًا
   * **مزلاجات RGB/HSV**: تحكم دقيق في الألوان
   * **إدخال رمز سداسي عشري**: مواصفات دقيقة للون (على سبيل المثال، `#FF0000` للأحمر)
6. انقر خارج منتقي الألوان **لتطبيق اللون الجديد**
7. **يتم تحديث** التدرج على الفور على الصورة

**إضافة أو إزالة نقاط توقف الألوان:**

* **إضافة نقطة توقف**: انقر على أيقونة + لإضافة عينة جديدة في النهاية
* **إزالة نقطة توقف**: انقر نقرًا مزدوجًا على مربع اللون لإزالة العينة

**استراتيجيات التخصيص:**

* **عكس التدرج**: اقلب ترتيب الألوان لعكس المعنى (على سبيل المثال، الأخضر = منخفض، الأحمر = مرتفع)
* **ألوان العلامة التجارية**: طابق لوحة ألوان مؤسستك للتقارير
* **مناسب لمصابي عمى الألوان**: استخدم تركيبات البرتقالي والأزرق أو الأرجواني والأصفر
* **تحسين الطباعة**: اختر ألوانًا تناسب الطباعة بالألوان والطباعة بتدرج الرمادي
* **عتبة متعددة**: استخدم ألوانًا مميزة عند عتبات قيم محددة للتصنيف

{% hint style=&quot;info&quot; %}
**حفظ التدرجات المخصصة**: يمكن حفظ التدرجات المخصصة وإعادة استخدامها. انقر فوق رمز الحفظ في لوحة LUT لحفظ أنظمة الألوان المخصصة لاستخدامها في المستقبل.
{% endhint %}

***

## سير العمل التفاعلي

### تحديثات في الوقت الفعلي

تقوم جميع تعديلات LUT في صندوق الحماية بتحديث الصورة **بشكل فوري وتفاعلي**:

* **تبديل الطبقة** → تتغير الصورة على الفور
* **تحديد التدرج** → تتحديث الألوان على الفور
* **ضبط نطاق القيمة** → تتغير التباينات في الوقت الفعلي
* **تغيير الفئات** → يتم تحديث سلاسة التدرج على الفور
* **تعديل القص** → يتم تغيير عرض الخلفية على الفور
* **تحرير الألوان** → يتم تطبيق التدرج المخصص على الفور

**لا حاجة إلى زر &quot;تطبيق&quot;** - جميع التغييرات مباشرة وتفاعلية!

{% hint style=&quot;success&quot; %}
**ردود فعل مباشرة**: تتيح لك ردود الفعل المرئية الفورية تجربة إعدادات مختلفة بسرعة حتى تجد التصور الأمثل لاحتياجات التحليل الخاصة بك.
{% endhint %}

### سير عمل التحسين التكراري

**سير عمل تحسين LUT النموذجي:**

1. **حدد طبقة المؤشر** (على سبيل المثال، RAW (الانعكاس))
2. **قم بتطبيق المؤشر** - اختر مرشح الكاميرا وصيغة المؤشر، واسحب الدوائر الملونة إلى الموقع المناسب في صيغة المؤشر
3. **قم بتطبيق تدرج LUT** - ابدأ بإعداد Red-Yellow-Green المسبق
4. **افحص قيم البكسل** - حرك المؤشر، ولاحظ نطاقات القيم
5. **اضبط الحد الأدنى/الحد الأقصى** - ضيق النطاق للتركيز على النباتات (على سبيل المثال، 0.2 إلى 0.9)
6. **اختر القص** - جرب &quot;الخلفية الأصلية&quot; للسياق
7. **صقل الألوان** - تخصيص التدرج اللوني إذا لزم الأمر للتأكيد على شيء معين
8. **إنهاء الإعدادات** - توثيق الإعدادات ونسخها إلى إعدادات المشروع لمعالجة التصدير

### فحص قيمة البكسل

فهم قيم البكسل الفعلية أمر بالغ الأهمية لتعيين نطاقات LUT فعالة:

**كيفية فحص القيم:**

1. تظهر قيم البكسل عندما يكون **مربع المؤشر** أو **مربع المؤشر و LUT** محددين في الصورة.
2. **حرك المؤشر** فوق مناطق مختلفة من الصورة
3. **راقب قيم البكسل** المعروضة في التسمية التوضيحية أثناء تحريك المؤشر
4. قم بالتكبير لرؤية البكسلات الفردية المميزة بقيمة عائمة
5. **دوّن** نطاقات القيم لمختلف الميزات:
   * **نباتات سليمة**: على سبيل المثال، NDVI 0.55-0.85
   * **نباتات متضررة**: على سبيل المثال، NDVI 0.30-0.50
   * **تربة جرداء**: على سبيل المثال، NDVI 0.05-0.25
   * **ماء** (إن وجد): على سبيل المثال، NDVI -0.05 إلى 0.10

**استخدام قيم البكسل لتعيين نطاقات LUT:**

بعد فحص قيم البكسل، اضبط الحد الأدنى/الأقصى لـ LUT وفقًا لذلك:

**مثال على السيناريو:**

* **الملاحظة**: قيم التربة = 0.05-0.25، متوترة = 0.25-0.50، صحية = 0.50-0.85
* **الهدف**: تصور صحة النباتات فقط (باستثناء التربة)
* **إعدادات LUT**: الحد الأدنى = `0.25`، الحد الأقصى = `0.85`
* **القص**: &quot;الخلفية الأصلية&quot; لرؤية التربة باللون الطبيعي
* **النتيجة**: ينطبق التدرج اللوني على النباتات فقط، وتظهر التربة باللون الأصلي

{% hint style=&quot;info&quot; %}
**النطاق الديناميكي**: تختلف نطاقات القيم باختلاف المحاصيل والمواسم ومراحل النمو. افحص دائمًا قيم البكسل في مجموعة البيانات المحددة قبل تعيين نطاقات LUT.
{% endhint %}

***

## مؤشرات مخصصة (Chloros+)

### إنشاء صيغ مؤشرات مخصصة

{% hint style=&quot;info&quot; %}
**مكان الإنشاء**: يمكن تكوين المؤشرات المخصصة في **إعدادات المشروع** قبل المعالجة، وكذلك في الشريط الجانبي لبرنامج عرض الصور.
{% endhint %}

**لإنشاء فهرس مخصص:**

1. **افتح إعدادات المشروع** (قبل المعالجة) أو الشريط الجانبي لبرنامج Image Viewer sandbox
2. انتقل إلى **القائمة المنسدلة لصيغة الفهرس**
3. ابحث عن خيار **&quot;مخصص&quot;** (يجب تسجيل الدخول باستخدام ترخيص Chloros+)
4. **حدد الصيغة** باستخدام متغيرات النطاق:
   * أسماء النطاقات: `NIR`، `Red`، `Green`، `Blue`، `RedEdge`، إلخ.
   * العوامل: `+`، `-`، `*`، `/`، `^` (أس)
   * الدوال: `sqrt()`، `abs()`، إلخ. (إذا كان مدعومًا)
   * الأقواس: `()` لترتيب العمليات
5. **قم بتسمية الفهرس** (على سبيل المثال، &quot;MyIndex&quot; أو &quot;CustomNDVI&quot;)
6. **احفظ التكوين**

**أمثلة على الصيغ المخصصة:**

```
Modified NDVI with offset:
(NIR - Red) / (NIR + Red + 0.5)

Simple ratio:
NIR / Red

Complex multi-band:
(NIR - Red) / (NIR + Red - Blue)

Exponential index:
(NIR / Red) ^ 2
```

{% hint style=&quot;warning&quot; %}
**التحقق من صحة الصيغة**: تأكد من أن الصيغة تستخدم النطاقات المتاحة في الكاميرا. على سبيل المثال، RedEdge متاح فقط في الكاميرات المزودة بفلتر RedEdge.
{% endhint %}

***

## الخطوات التالية

الآن بعد أن فهمت صندوق الحماية للمؤشر/LUT:

* **تطبيق على المعالجة**: استخدم الإعدادات المكتشفة في [إعدادات المشروع](../project-settings/project-settings.md)
* **معالجة دفعية**: تطبيق الفهارس المحسّنة على مجموعات البيانات الكاملة
* **مزيد من المعلومات**: اقرأ [صيغ الفهرس متعدد الأطياف](../project-settings/multispectral-index-formulas.md)

الوثائق ذات الصلة:

* [**طبقات الصور**](image-layers.md) - إدارة الطبقات وتصورها
* [**فتح صورة بملء الشاشة**](opening-an-image-full-screen.md) - أساسيات عارض الصور
* [**معالجة الصور (GUI)**](../processing-images-gui/adding-files-to-a-project.md) - سير العمل الكامل للمعالجة
