# مراقبة المعالجة

بمجرد بدء المعالجة، يوفر Chloros عدة طرق لمراقبة التقدم والتحقق من المشكلات وفهم ما يحدث مع مجموعة البيانات الخاصة بك. تشرح هذه الصفحة كيفية تتبع المعالجة وتفسير المعلومات التي يوفرها Chloros.

## نظرة عامة على شريط التقدم

يعرض شريط التقدم في العنوان العلوي حالة المعالجة في الوقت الفعلي ونسبة الإنجاز.

### شريط التقدم في الوضع المجاني

للمستخدمين الذين لا يمتلكون ترخيص Chloros+:

**عرض التقدم على مرحلتين:**

1. **الكشف عن الهدف** - العثور على أهداف المعايرة في الصور
2. **المعالجة** - تطبيق التصحيحات والتصدير

**يُظهر شريط التقدم:**

* النسبة المئوية الإجمالية للإنجاز (0-100٪)
* اسم المرحلة الحالية
* تصور بسيط لشريط أفقي

### شريط التقدم Chloros+

للمستخدمين الذين لديهم ترخيص Chloros+:

**عرض التقدم على 4 مراحل:**

1. **الكشف** - العثور على أهداف المعايرة
2. **التحليل** - فحص الصور وإعداد خط الأنابيب
3. **المعايرة** - تطبيق تصحيحات التظليل والانعكاس
4. **التصدير** - حفظ الملفات المعالجة

**الميزات التفاعلية:**

* **مرر مؤشر الماوس فوق** شريط التقدم لرؤية لوحة موسعة من 4 مراحل
* **انقر** على شريط التقدم لتجميد/تثبيت اللوحة الموسعة
* **انقر مرة أخرى** لإلغاء التجميد والإخفاء التلقائي عند إبعاد الماوس
* تعرض كل مرحلة التقدم الفردي (0-100٪)

***

## فهم كل مرحلة من مراحل المعالجة

### المرحلة 1: الكشف (الكشف عن الهدف)

**ما يحدث:**

* يقوم Chloros بمسح الصور المحددة بعلامة الاختيار الهدف
* تحدد خوارزميات الرؤية الحاسوبية لوحات المعايرة الأربعة
* يتم استخراج قيم الانعكاس من كل لوحة
* يتم تسجيل الطوابع الزمنية للأهداف من أجل جدولة المعايرة بشكل صحيح

**المدة:**

* مع الأهداف المحددة: 10-60 ثانية
* بدون الأهداف المحددة: 5-30+ دقيقة (مسح جميع الصور)

**مؤشر التقدم:**

* الكشف: 0٪ → 100٪
* عدد الصور الممسوحة ضوئيًا
* عدد الأهداف الموجودة

**ما يجب الانتباه إليه:**

* يجب أن يكتمل بسرعة إذا تم تحديد الأهداف بشكل صحيح
* إذا استغرق الأمر وقتًا طويلاً، فقد لا يتم تحديد الأهداف
* تحقق من سجل التصحيح بحثًا عن رسائل &quot;تم العثور على الهدف&quot;

### المرحلة 2: التحليل

**ما يحدث:**

* قراءة بيانات EXIF للصور (الطوابع الزمنية وإعدادات التعرض)
* تحديد استراتيجية المعايرة بناءً على الطوابع الزمنية للأهداف
* تنظيم قائمة انتظار معالجة الصور
* إعداد عناصر معالجة متوازية (Chloros+ فقط)

**المدة:** 5-30 ثانية

**مؤشر التقدم:**

* التحليل: 0٪ → 100٪
* مرحلة سريعة، عادةً ما تكتمل بسرعة

**ما يجب الانتباه إليه:**

* يجب أن يتقدم بشكل ثابت دون توقف
* ستظهر تحذيرات حول البيانات الوصفية المفقودة في سجل التصحيح

### المرحلة 3: المعايرة

**ما يحدث:**

* **إزالة التباين**: تحويل نمط باير RAW إلى 3 قنوات
* **تصحيح التظليل**: إزالة تظليل حواف العدسة
* **معايرة الانعكاس**: التطبيع باستخدام القيم المستهدفة
* **حساب المؤشر**: حساب المؤشرات متعددة الأطياف
* معالجة كل صورة من خلال خط الأنابيب الكامل

**المدة:** غالبية إجمالي وقت المعالجة (60-80٪)

**مؤشر التقدم:**

* المعايرة: 0٪ → 100٪
* الصورة الحالية قيد المعالجة
* الصور المكتملة / إجمالي الصور

**سلوك المعالجة:**

* **الوضع الحر**: يعالج صورة واحدة في كل مرة بالتسلسل
* **وضع Chloros+**: يعالج ما يصل إلى 16 صورة في وقت واحد
* **تسريع GPU**: يسرع هذه المرحلة بشكل كبير

**ما يجب الانتباه إليه:**

* تقدم ثابت من خلال عدد الصور
* تحقق من سجل التصحيح للحصول على رسائل إكمال لكل صورة
* تحذيرات حول جودة الصورة أو مشكلات المعايرة

### المرحلة 4: التصدير

**ما يحدث:**

* كتابة الصور المعايرة على القرص بالتنسيق المحدد
* تصدير صور المؤشر متعدد الأطياف بألوان LUT
* إنشاء مجلدات فرعية لنماذج الكاميرات
* الحفاظ على أسماء الملفات الأصلية مع اللواحق المناسبة

**المدة:** 10-20% من إجمالي وقت المعالجة

**مؤشر التقدم:**

* التصدير: 0% → 100%
* الملفات قيد الكتابة
* تنسيق التصدير والوجهة

**ما يجب الانتباه إليه:**

* تحذيرات مساحة القرص
* أخطاء كتابة الملفات
* إكمال جميع المخرجات المكونة

***

## علامة تبويب سجل التصحيح

يوفر سجل التصحيح معلومات مفصلة حول تقدم المعالجة وأي مشكلات تمت مواجهتها.

### الوصول إلى سجل التصحيح

1. انقر فوق **سجل التصحيح** <img src="../.gitbook/assets/icon_log.JPG" alt="" data-size="line"> في الشريط الجانبي الأيسر
2. تفتح لوحة السجل لعرض رسائل المعالجة في الوقت الفعلي
3. يتم التمرير التلقائي لعرض أحدث الرسائل

### فهم رسائل السجل

#### رسائل المعلومات (أبيض/رمادي)

تحديثات المعالجة العادية:

```
[INFO] Processing started
[INFO] Target detected in IMG_0015.RAW - 4 panels found
[INFO] Calibrating IMG_0234.RAW
[INFO] Exported NDVI image: IMG_0234_NDVI.tif
[INFO] Processing complete
```

#### رسائل التحذير (أصفر)

مشكلات غير حرجة لا توقف المعالجة:

```
[WARN] No GPS data found in IMG_0145.RAW
[WARN] Target image timestamp gap > 30 minutes
[WARN] Low contrast in calibration panel - results may vary
```

**الإجراء:** راجع التحذيرات بعد المعالجة، ولكن لا تقاطعها

#### رسائل الخطأ (Red)

مشكلات حرجة قد تتسبب في فشل المعالجة:

```
[ERROR] Cannot write file - disk full
[ERROR] Corrupted image file: IMG_0299.RAW
[ERROR] No targets detected - enable reflectance calibration or mark target images
```

**الإجراء:** أوقف المعالجة، وحل الخطأ، وأعد التشغيل

### رسائل السجل الشائعة

| الرسالة                          | المعنى                                | الإجراء المطلوب                                         |
| -------------------------------- | -------------------------------------- | ----------------------------------------------------- |
| &quot;تم الكشف عن الهدف في \[اسم الملف]&quot; | تم العثور على هدف المعايرة بنجاح  | لا شيء - طبيعي                                         |
| &quot;معالجة الصورة X من Y&quot;        | تحديث التقدم الحالي                | لا شيء - طبيعي                                         |
| &quot;لم يتم العثور على أهداف&quot;               | لم يتم الكشف عن أهداف المعايرة        | قم بتمييز صور الأهداف أو تعطيل معايرة الانعكاس |
| &quot;مساحة القرص غير كافية&quot;        | مساحة التخزين غير كافية للإخراج          | تحرير مساحة القرص                                    |
| &quot;تخطي الملف التالف&quot;        | ملف الصورة تالف                  | إعادة نسخ الملف من بطاقة SD                             |
| &quot;تطبيق بيانات PPK&quot;               | تطبيق تصحيحات GPS من ملف .daq | لا شيء - طبيعي                                         |

### نسخ بيانات السجل

لنسخ السجل لأغراض استكشاف الأخطاء وإصلاحها أو الدعم:

1. افتح لوحة سجل التصحيح
2. انقر فوق الزر **&quot;نسخ السجل&quot;** (أو انقر بزر الماوس الأيمن → حدد الكل)
3. الصق في ملف نصي أو بريد إلكتروني
4. أرسل إلى دعم MAPIR إذا لزم الأمر

***

## مراقبة موارد النظام

### استخدام وحدة المعالجة المركزية

**الوضع الحر:**

* نواة وحدة معالجة مركزية واحدة بنسبة \~100٪
* النوى الأخرى خاملة أو متاحة
* النظام يظل مستجيبًا

**Chloros+ الوضع المتوازي:**

* نوى متعددة بنسبة 80-100٪ (حتى 16 نواة)
* استخدام عالٍ لوحدة المعالجة المركزية بشكل عام
* قد يبدو النظام أقل استجابة

**للمراقبة:**

* Windows مدير المهام (Ctrl+Shift+Esc)
* علامة التبويب الأداء → قسم وحدة المعالجة المركزية
* ابحث عن عمليات &quot;Chloros&quot; أو &quot;chloros-backend&quot;

### استخدام الذاكرة (RAM)

**الاستخدام النموذجي:**

* المشاريع الصغيرة (&lt; 100 صورة): 2-4 جيجابايت
* المشاريع المتوسطة (100-500 صورة): 4-8 جيجابايت
* المشاريع الكبيرة (500+ صورة): 8-16 جيجابايت
* يستخدم الوضع المتوازي Chloros+ المزيد من ذاكرة الوصول العشوائي

**إذا كانت الذاكرة منخفضة:**

* قم بمعالجة دفعات أصغر
* أغلق التطبيقات الأخرى
* قم بترقية ذاكرة الوصول العشوائي (RAM) إذا كنت تقوم بمعالجة مجموعات بيانات كبيرة بانتظام

### استخدام وحدة معالجة الرسومات (GPU) (Chloros+ مع CUDA)

عند تمكين تسريع وحدة معالجة الرسومات (GPU):

* تظهر وحدة معالجة الرسومات (GPU) من NVIDIA استخدامًا عاليًا (60-90٪)
* يزداد استخدام VRAM (يتطلب 4 جيجابايت+ VRAM)
* تكون مرحلة المعايرة أسرع بشكل ملحوظ

**للمراقبة:**

* رمز NVIDIA System Tray
* إدارة المهام → الأداء → GPU
* GPU-Z أو أداة مراقبة مماثلة

### إدخال/إخراج القرص

**ما يمكن توقعه:**

* قراءة عالية للقرص أثناء مرحلة التحليل
* كتابة عالية للقرص أثناء مرحلة التصدير
* SSD أسرع بكثير من HDD

**نصيحة حول الأداء:**

* استخدم SSD لمجلد المشروع عندما يكون ذلك ممكنًا
* تجنب محركات الأقراص الشبكية للمجموعات الكبيرة من البيانات
* تأكد من أن القرص ليس قريبًا من سعته القصوى (يؤثر على سرعة الكتابة)

***

## اكتشاف المشكلات أثناء المعالجة

### علامات التحذير

**توقف التقدم (لا تغيير لمدة 5 دقائق أو أكثر):**

* تحقق من سجل التصحيح بحثًا عن الأخطاء
* تحقق من مساحة القرص المتاحة
* تحقق من إدارة المهام للتأكد من تشغيل Chloros

**تظهر رسائل الخطأ بشكل متكرر:**

* أوقف المعالجة وراجع الأخطاء
* الأسباب الشائعة: مساحة القرص، الملفات التالفة، مشكلات الذاكرة
* راجع قسم استكشاف الأخطاء وإصلاحها أدناه

**توقف النظام عن الاستجابة:**

* يستخدم Chloros+ الوضع المتوازي موارد كثيرة جدًا
* فكر في تقليل المهام المتزامنة أو ترقية الأجهزة
* الوضع الحر أقل استهلاكًا للموارد

### متى تتوقف عن المعالجة

توقف عن المعالجة إذا رأيت:

* ❌ أخطاء &quot;القرص ممتلئ&quot; أو &quot;لا يمكن كتابة الملف&quot;
* ❌ أخطاء متكررة في تلف ملفات الصور
* ❌ تجميد النظام تمامًا (عدم الاستجابة)
* ❌ اكتشاف تكوين إعدادات خاطئة
* ❌ استيراد صور خاطئة

**كيفية الإيقاف:**

1. انقر على **زر إيقاف/إلغاء** (يحل محل زر بدء)
2. تتوقف المعالجة، ويضيع التقدم المحرز
3. قم بإصلاح المشكلات وأعد التشغيل من البداية

***

## استكشاف الأخطاء وإصلاحها أثناء المعالجة

### المعالجة بطيئة جدًا

**الأسباب المحتملة:**

* صور مستهدفة غير محددة (مسح جميع الصور)
* تخزين HDD بدلاً من SSD
* موارد النظام غير كافية
* تكوين العديد من الفهارس
* الوصول إلى محرك أقراص الشبكة

**الحلول:**

1. إذا بدأت للتو وفي مرحلة الكشف: قم بالإلغاء، وقم بتمييز الأهداف، وأعد التشغيل
2. للمستقبل: استخدم SSD، وقلل الفهارس، وقم بترقية الأجهزة
3. ضع في اعتبارك CLI للمعالجة المجمعة لمجموعات البيانات الكبيرة

### تحذيرات &quot;مساحة القرص&quot;

**الحلول:**

1. قم بتحرير مساحة القرص على الفور
2. انقل المشروع إلى محرك أقراص به مساحة أكبر
3. قلل عدد الفهارس المراد تصديرها
4. استخدم تنسيق JPG بدلاً من TIFF (ملفات أصغر حجمًا)

### رسائل &quot;ملف تالف&quot; متكررة

**الحلول:**

1. أعد نسخ الصور من بطاقة SD لضمان سلامتها
2. اختبر بطاقة SD للتأكد من عدم وجود أخطاء
3. أزل الملفات التالفة من المشروع
4. تابع معالجة الصور المتبقية

### ارتفاع درجة حرارة النظام / الاختناق

**الحلول:**

1. تأكد من وجود تهوية كافية
2. نظف الغبار من فتحات تهوية الكمبيوتر
3. قلل حمل المعالجة (استخدم الوضع الحر بدلاً من Chloros+)
4. قم بالمعالجة خلال الأوقات الأكثر برودة من اليوم

***

## إشعار اكتمال المعالجة

عند انتهاء المعالجة:

* يصل شريط التقدم إلى 100٪
* تظهر رسالة **&quot;اكتملت المعالجة&quot;** في سجل التصحيح
* يتم تمكين زر البدء مرة أخرى
* توجد جميع الملفات الناتجة في المجلد الفرعي لطراز الكاميرا

***

## الخطوات التالية

بمجرد اكتمال المعالجة:

1. **مراجعة النتائج** - انظر [إنهاء المعالجة](finishing-the-processing.md)
2. **تحقق من مجلد الإخراج** - تحقق من صحة تصدير جميع الملفات
3. **راجع سجل التصحيح** - تحقق من وجود أي تحذيرات أو أخطاء
4. **قم بمعاينة الصور المعالجة** - استخدم عارض الصور أو برنامج خارجي

للحصول على معلومات حول مراجعة واستخدام النتائج المعالجة، راجع [إنهاء المعالجة](finishing-the-processing.md).
